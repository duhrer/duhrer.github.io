(this["webpackJsonpreact-launchpad-slide-puzzle"]=this["webpackJsonpreact-launchpad-slide-puzzle"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(7),s=a.n(r),u=(a(13),a(1)),l=a(2),o=a(5),c=a(4),d=a(3),h={0:"#000000",1:"#CCCCCC",2:"#EEEEEE",3:"#FFFFFF",4:"#FDB1CF",5:"#FF0000",6:"#cc0000",7:"#aa0000",8:"#FDFBF2",9:"#fdaa84",10:"#fdaa84",11:"#cc9900",12:"#ffdd66",13:"#fdfc8f",14:"#cccc00",15:"#999900",16:"#ccffcc",17:"#99ff99",18:"#66cc66",19:"#99ff99",20:"#99ffcc",21:"#21FA04",22:"#1BC208",23:"#16A20A",24:"#23F9BE",25:"#24FFAE",26:"#19AC1E",27:"#26FDB5",28:"#32F97D",29:"#2BFFFF",30:"#30FCDE",31:"#20DFAA",32:"#C6FCF9",33:"#21E9CB",34:"#1DD0C8",35:"#19B295",36:"#BFFBFB",37:"#1DAECF",38:"#1DC9EF",39:"#22D6F5",40:"#BBF3FB",41:"#36DBFD",42:"#37AAF4",43:"#2EB8FD",44:"#AEAFFD",45:"#0101FF",46:"#5B40ED",47:"#4F3BC1",48:"#D1C2FD",49:"#DDA1FC",50:"#B65DED",51:"#7D3CB5",52:"#F9C8F9",53:"#F735F8",54:"#F735F8",55:"#B824BC",56:"#F69FE1",57:"#F954FB",58:"#E229B3",59:"#DC00B8",60:"#DD7D35",61:"#F6BB28",62:"#DBCA12",63:"#83CD3C",64:"#1ABB10",65:"#23F0A5",66:"#5962EB",67:"#737EFB",68:"#29FFFD",69:"#AB94FD",70:"#F1F4FE",71:"#AAA8BB",72:"#F72C4E",73:"#EFFFDE",74:"#D3F846",75:"#E1FFDB",76:"#25FE13",77:"#25FAB4",78:"#26DEFA",79:"#26DCFD",80:"#717AFD",81:"#DB5FFC",82:"#FCA9FE",83:"#C08650",84:"#FC8F0D",85:"#CAFF58",86:"#83F62C",87:"#00FF00",88:"#21F906",89:"#C2FFEF",90:"#5AFFFC",91:"#C4FFFE",92:"#BAFEFD",93:"#C0D5FE",94:"#FCB2FD",95:"#FC5DFD",96:"#FC7E09",97:"#D8E014",98:"#B6FF29",99:"#E6DB0F",100:"#C9A00E",101:"#1CC998",102:"#4CFFD1",103:"#ABACBE",104:"#A4BCFD",105:"#FCE6BB",106:"#E20011",107:"#FDB699",108:"#F28E75",109:"#F8E376",110:"#D1F380",111:"#C9FF50",112:"#94919D",113:"#E7FAD9",114:"#BAFFF2",115:"#efefFf",116:"#EFFFEF",117:"#C3E1F2",118:"#F2F2F2",119:"#FEFEFF",120:"#E7000C",121:"#BD0610",122:"#00ff00",123:"#1DC60D",124:"#FEFF33",125:"#A79E0C",126:"#F8A80E",127:"#D8680C"},p=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("button",{className:0===this.props.value?"cell empty":"cell",ref:this.props.cellRef,row:this.props.row,col:this.props.col,onClick:function(){e.props.handleClick(e.props)},onKeyDown:function(t){e.props.handleKeyDown(t,e.props)},style:{"background-color":h[this.props.value]}},0===this.props.value?"":this.props.value)}}]),a}(i.a.Component),f=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).row=e.row?parseInt(e.row,10):0,n.offset=8*n.row,n.numCells=e.numCells||8,n}return Object(l.a)(a,[{key:"renderSquares",value:function(){for(var e=[],t=0;t<this.numCells;t++)e.push(this.renderSquare(t));return e}},{key:"renderSquare",value:function(e){return i.a.createElement(p,{cellRef:this.props.cellRefs&&this.props.cellRefs[e],value:this.props.cells&&this.props.cells[e],handleKeyDown:this.props.handleKeyDown,handleClick:this.props.handleClick,key:"cell-"+(this.offset+e),col:e,row:this.row})}},{key:"render",value:function(){return i.a.createElement("div",{className:"row"},this.renderSquares())}}]),a}(i.a.Component),m=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).numRows=e.numRows||8,n.numCells=e.numCells||8,n.cellRefs=Array(n.numRows);for(var r=0;r<n.numRows;r++){n.cellRefs[r]=Array(n.numCells);for(var s=0;s<n.numRows;s++)n.cellRefs[r][s]=i.a.createRef()}return n}return Object(l.a)(a,[{key:"handleKeyDown",value:function(e,t,a){if(-1!==m.indexOf(t.key)){var n=a.row,i=a.col;"ArrowDown"===t.key?n=(n+1)%this.numRows:"ArrowUp"===t.key?n=(n+(this.numRows-1))%this.numRows:"ArrowLeft"===t.key?i=(i+(this.numRows-1))%this.numCells:"ArrowRight"===t.key&&(i=(i+1)%this.numCells),e.cellRefs[n][i].current.focus()}}},{key:"renderRows",value:function(){for(var e=this,t=[],a=0;a<this.numRows;a++)t.push(i.a.createElement(f,{cellRefs:this.cellRefs[a],numCells:this.numCells,cells:this.props.grid&&this.props.grid[a],handleKeyDown:function(t,a){e.handleKeyDown(e,t,a)},handleClick:this.props.handleClick,key:"row-"+a,row:a}));return t}},{key:"render",value:function(){return i.a.createElement("div",null,this.renderRows())}}]),a}(i.a.Component),g=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("option",{value:this.props.value},this.props.label)}}]),a}(i.a.Component),y=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selectedValues:e.selectedValues||[]},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){for(var t={},a=0;a<e.target.options.length;a++){var n=e.target.options[a];n.selected&&(t[n.value]=!0)}var i=Object.keys(t);this.setState({selectedValues:i}),this.props.stateChangeCallbacks&&this.props.stateChangeCallbacks.forEach((function(e){e(i)}))}},{key:"render",value:function(){for(var e=[],t=Object.keys(this.props.options),a=0;a<t.length;a++){var n=t[a],r=this.props.options[n];e.push(i.a.createElement(g,{value:r.value,key:"option-"+n,label:r.label||r.value}))}return i.a.createElement("div",null,i.a.createElement("h2",null,this.props.title),i.a.createElement("select",{multiple:!0,onChange:this.handleChange,defaultValue:this.props.defaultValue},e))}}]),a}(i.a.Component),v={copy:function(e){return JSON.parse(JSON.stringify(e))}},C=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).sendMidiMessage=n.sendMidiMessage.bind(Object(o.a)(n)),n.inputListeners=e.inputListeners||[n.sendMidiMessage],n.outputChangeListeners=e.outputChangeListeners||[],e.outputAccumulator&&e.outputAccumulator(n.sendMidiMessage),n.outputPorts={},n.state={inputDefs:{},selectedInputs:[],outputDefs:{},selectedOutputs:[]},n.handleStateChange=n.handleStateChange.bind(Object(o.a)(n)),n.updateSelectedInputs=n.updateSelectedInputs.bind(Object(o.a)(n)),n.updateSelectedOutputs=n.updateSelectedOutputs.bind(Object(o.a)(n)),navigator.requestMIDIAccess({sysex:!0}).then((function(e){for(var t=e.inputs.values(),a={},i=function(e){a[e.value.id]={label:e.value.name,value:e.value.id},e.value.onmidimessage=function(t){n.handleMidiInput(e.value.id,t)}},r=t.next();r&&!r.done;r=t.next())i(r);n.setState({inputDefs:a});for(var s={},u=e.outputs.values(),l=u.next();l&&!l.done;l=u.next())s[l.value.id]={label:l.value.name,value:l.value.id},n.outputPorts[l.value.id]=l.value;n.setState({outputDefs:s}),e.addEventListener("statechange",n.handleStateChange)})),n}return Object(l.a)(a,[{key:"updateSelectedInputs",value:function(e){this.setState({selectedInputs:e})}},{key:"updateSelectedOutputs",value:function(e){this.setState({selectedOutputs:e}),this.outputChangeListeners.forEach((function(e){e()}))}},{key:"handleStateChange",value:function(e){var t=e.port,a="input"===t.type?"inputDefs":"outputDefs",n=v.copy(this.state[a]);"connected"===t.state?n[t.id]={label:t.name,value:t.id}:delete n[t.id];var i={};i[a]=n,this.setState(i)}},{key:"handleMidiInput",value:function(e,t){var a=this.state.inputDefs[e],n=-1!==this.state.selectedInputs.indexOf(e);if(a&&n&&this.inputListeners.length){var i=w.midi.read(t.data);this.inputListeners.forEach((function(e){e(i)}))}}},{key:"sendMidiMessage",value:function(e){var t=this,a=Object.keys(this.state.outputDefs),n=w.midi.write(e);a.forEach((function(e){-1!==t.state.selectedOutputs.indexOf(e)&&t.outputPorts[e].send(n)}))}},{key:"render",value:function(){return i.a.createElement("div",{class:"midi-panel"},i.a.createElement(y,{title:"Inputs",options:this.state.inputDefs,selectedValues:this.state.selectedInputs,stateChangeCallbacks:[this.updateSelectedInputs]}),i.a.createElement(y,{title:"Outputs",options:this.state.outputDefs,selectedValues:this.state.selectedOutputs,stateChangeCallbacks:[this.updateSelectedOutputs]}))}}]),a}(i.a.Component),w={midi:{}};w.midi.read=function(e){var t,a=e[0],n=15&a;switch(a>>4){case 8:t=w.midi.read.noteOff;break;case 9:t=e[2]>0?w.midi.read.noteOn:w.midi.read.noteOff;break;case 10:t=w.midi.read.polyAftertouch;break;case 11:t=w.midi.read.controlChange;break;case 12:t=w.midi.read.programChange;break;case 13:t=w.midi.read.channelAftertouch;break;case 14:t=w.midi.read.pitchbend;break;case 15:t=w.midi.read.system;break;default:return w.fail("Received an unrecognized MIDI message: "+JSON.stringify(e))}return t(n,e)},w.midi.read.note=function(e,t,a){return{type:e,channel:t,note:a[1],velocity:a[2]}},w.midi.read.noteOn=function(e,t){return w.midi.read.note("noteOn",e,t)},w.midi.read.noteOff=function(e,t){return w.midi.read.note("noteOff",e,t)},w.midi.read.polyAftertouch=function(e,t){return{type:"aftertouch",channel:e,note:t[1],pressure:t[2]}},w.midi.read.controlChange=function(e,t){return{type:"control",channel:e,number:t[1],value:t[2]}},w.midi.read.programChange=function(e,t){return{type:"program",channel:e,program:t[1]}},w.midi.read.channelAftertouch=function(e,t){return{type:"aftertouch",channel:e,pressure:t[1]}},w.midi.read.twoByteValue=function(e){return e[2]<<7|e[1]},w.midi.read.pitchbend=function(e,t){return{type:"pitchbend",channel:e,value:w.midi.read.twoByteValue(t)}},w.midi.read.system=function(e,t){if(1===e)return w.midi.messageFailure("quarter frame MTC");var a;switch(e){case 0:a=w.midi.read.sysex;break;case 2:a=w.midi.read.songPointer;break;case 3:a=w.midi.read.songSelect;break;case 6:a=w.midi.read.tuneRequest;break;case 8:a=w.midi.read.clock;break;case 10:a=w.midi.read.start;break;case 11:a=w.midi.read.continue;break;case 12:a=w.midi.read.stop;break;case 14:a=w.midi.read.activeSense;break;case 15:a=w.midi.read.reset;break;default:return w.fail("Received an unrecognized MIDI system message: "+JSON.stringify(t))}return a(t)},w.midi.messageFailure=function(e){w.fail("Flocking does not currently support MIDI "+e+" messages.")},w.midi.read.sysex=function(e){var t=240===e[0]?1:0,a=e.length-(247===e[e.length-1]?1:0);return{type:"sysex",data:e instanceof Uint8Array?e.subarray(t,a):e.slice(t,a)}},w.midi.read.valueMessage=function(e,t){return{type:e,value:t}},w.midi.read.songPointer=function(e){var t=w.midi.read.twoByteValue(e);return w.midi.read.valueMessage("songPointer",t)},w.midi.read.songSelect=function(e){return w.midi.read.valueMessage("songSelect",e[1])},w.midi.read.tuneRequest=function(){return{type:"tuneRequest"}},w.midi.systemRealtimeMessages=["tuneRequest","clock","start","continue","stop","activeSense","reset"],w.midi.createSystemRealtimeMessageReaders=function(e){e.forEach((function(e){w.midi.read[e]=function(){return{type:e}}}))},w.midi.createSystemRealtimeMessageReaders(w.midi.systemRealtimeMessages),w.midi.write=function(e){if("sysex"===e.type)return w.midi.write.sysex(e);switch(e.type){case"noteOn":return w.midi.write.note(9,e);case"noteOff":return w.midi.write.note(8,e);case"aftertouch":return w.midi.write.aftertouch(e);case"control":return w.midi.write.controlChange(e);case"program":return w.midi.write.programChange(e);case"pitchbend":return w.midi.write.largeValueMessage(14,e.channel,e);case"songPointer":return w.midi.write.largeValueMessage(15,2,e);case"songSelect":return w.midi.write.largeValueMessage(15,3,e);case"tuneRequest":return w.midi.write.singleByteMessage(15,6);case"clock":return w.midi.write.singleByteMessage(15,8);case"start":return w.midi.write.singleByteMessage(15,10);case"continue":return w.midi.write.singleByteMessage(15,11);case"stop":return w.midi.write.singleByteMessage(15,12);case"activeSense":return w.midi.write.singleByteMessage(15,14);case"reset":return w.midi.write.singleByteMessage(15,15);default:w.fail("Cannot write an unrecognized MIDI message of type '"+e.type+"'.")}},w.midi.write.note=function(e,t){return w.midi.write.threeByteMessage(e,t.channel,t.note,t.velocity)},w.midi.write.controlChange=function(e){return w.midi.write.threeByteMessage(11,e.channel,e.number,e.value)},w.midi.write.programChange=function(e){return w.midi.write.twoByteMessage(12,e.channel,e.program)},w.midi.write.aftertouch=function(e){return e.note?w.midi.write.note(10,e):w.midi.write.twoByteMessage(13,e.channel,e.pressure)},w.midi.write.singleByteMessage=function(e,t){var a=new Uint8Array(1);return a[0]=w.midi.write.statusByte(e,t),a},w.midi.write.twoByteMessage=function(e,t,a){var n=new Uint8Array(2);return n[0]=w.midi.write.statusByte(e,t),n[1]=a,n},w.midi.write.threeByteMessage=function(e,t,a,n){var i=new Uint8Array(3);return i[0]=w.midi.write.statusByte(e,t),i[1]=a,i[2]=n,i},w.midi.write.largeValueMessage=function(e,t,a){var n=new Uint8Array(3);return n[0]=w.midi.write.statusByte(e,t),w.midi.write.twoByteValue(a.value,n,1),n},w.midi.write.statusByte=function(e,t){return(e<<4)+t},w.midi.write.twoByteValue=function(e,t,a){t[a=a||0]=127&e,t[a+1]=e>>7&127},w.midi.write.sysex=function(e){240!==e.data[0]&&247!==e.data[e.data.length-1]||w.fail("Sysex payloads should not include framing bytes.");var t=e.data,a=t.length,n=new Uint8Array(a+2);return n[0]=240,n[a+1]=247,n.set(t,1),n},w.fail=function(e){throw new Error(e)};var b=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).outputCallbacks=[],n.state={grid:[[70,71,72,73,74,75,76,77],[60,61,62,63,64,65,66,67],[50,51,52,53,54,55,56,57],[40,41,42,43,44,45,46,47],[30,31,32,33,34,35,36,37],[20,21,22,23,24,25,26,27],[10,11,12,13,14,15,16,17],[0,1,2,3,4,5,6,7]]},n.registerOutput=n.registerOutput.bind(Object(o.a)(n)),n.handleMidiInput=n.handleMidiInput.bind(Object(o.a)(n)),n.updateLaunchpad=n.updateLaunchpad.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.updateLaunchpad()}},{key:"updateLaunchpad",value:function(){if(this.outputCallbacks.length){for(var e=[],t=0;t<this.state.grid.length;t++)for(var a=this.state.grid[t],n=0;n<a.length;n++){var i=this.state.grid[t][n],r=10*(8-t)+n+1;e.push({type:"noteOn",channel:0,velocity:i,note:r})}for(var s=0;s<this.outputCallbacks.length;s++)for(var u=this.outputCallbacks[s],l=0;l<e.length;l++){u(e[l])}}}},{key:"registerOutput",value:function(e){this.outputCallbacks.push(e)}},{key:"handleMidiInput",value:function(e){if("noteOn"===e.type){var t=e.note%10-1,a=8-Math.floor(e.note/10);this.pushFromSquare(a,t)}}},{key:"pushFromSquare",value:function(e,t){if(0===this.state.grid[e][t]);else{var a=this.state.grid[e],n=a.indexOf(0);if(-1!==n){var i=this.state.grid.slice(),r=this.shiftArray(a,n,t);i[e]=r,this.setState({grid:i})}else{var s=this.extractCol(t),u=s.indexOf(0);if(-1!==u){for(var l=this.state.grid.slice(),o=this.shiftArray(s,u,e),c=0;c<this.state.grid.length;c++)l[c][t]=o[c];this.setState({grid:l})}}}}},{key:"handleClick",value:function(e){this.pushFromSquare(e.row,e.col)}},{key:"shiftArray",value:function(e,t,a){var n=e.slice();return n.splice(t,1),n.splice(a,0,0),n}},{key:"extractCol",value:function(e){for(var t=[],a=0;a<this.state.grid.length;a++)t.push(this.state.grid[a][e]);return t}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"puzzle"},i.a.createElement(D,null),i.a.createElement("div",{className:"grid"},i.a.createElement(F,{grid:this.state.grid,handleClick:function(t){return e.handleClick(t)}})),i.a.createElement(C,{outputAccumulator:this.registerOutput,inputListeners:[this.handleMidiInput],outputChangeListeners:[this.updateLaunchpad]}))}}]),a}(i.a.Component);function D(e){return i.a.createElement("div",{className:"instructions"},i.a.createElement("p",null,"This is a simple sliding puzzle.  You can use tabs or arrow keys to navigate."),i.a.createElement("p",null,'Click (or hit enter) on any square that shares a row with the empty square to "slide" one or more squares in its direction.'))}s.a.render(i.a.createElement(b,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.3735db50.chunk.js.map