(this["webpackJsonpreact-launchpad-slide-puzzle"]=this["webpackJsonpreact-launchpad-slide-puzzle"]||[]).push([[0],{20:function(e,t,n){e.exports=n(29)},25:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),s=n.n(i),u=(n(25),n(19)),o=n(4),l=n(5),c=n(7),d=n(6),p={0:"#000000",1:"#CCCCCC",2:"#EEEEEE",3:"#FFFFFF",4:"#FDB1CF",5:"#FF0000",6:"#cc0000",7:"#aa0000",8:"#FDFBF2",9:"#fdaa84",10:"#fdaa84",11:"#cc9900",12:"#ffdd66",13:"#fdfc8f",14:"#cccc00",15:"#999900",16:"#ccffcc",17:"#99ff99",18:"#66cc66",19:"#99ff99",20:"#99ffcc",21:"#21FA04",22:"#1BC208",23:"#16A20A",24:"#23F9BE",25:"#24FFAE",26:"#19AC1E",27:"#26FDB5",28:"#32F97D",29:"#2BFFFF",30:"#30FCDE",31:"#20DFAA",32:"#C6FCF9",33:"#21E9CB",34:"#1DD0C8",35:"#19B295",36:"#BFFBFB",37:"#1DAECF",38:"#1DC9EF",39:"#22D6F5",40:"#BBF3FB",41:"#36DBFD",42:"#37AAF4",43:"#2EB8FD",44:"#AEAFFD",45:"#0101FF",46:"#5B40ED",47:"#4F3BC1",48:"#D1C2FD",49:"#DDA1FC",50:"#B65DED",51:"#7D3CB5",52:"#F9C8F9",53:"#F735F8",54:"#F735F8",55:"#B824BC",56:"#F69FE1",57:"#F954FB",58:"#E229B3",59:"#DC00B8",60:"#DD7D35",61:"#F6BB28",62:"#DBCA12",63:"#83CD3C",64:"#1ABB10",65:"#23F0A5",66:"#5962EB",67:"#737EFB",68:"#29FFFD",69:"#AB94FD",70:"#F1F4FE",71:"#AAA8BB",72:"#F72C4E",73:"#EFFFDE",74:"#D3F846",75:"#E1FFDB",76:"#25FE13",77:"#25FAB4",78:"#26DEFA",79:"#26DCFD",80:"#717AFD",81:"#DB5FFC",82:"#FCA9FE",83:"#C08650",84:"#FC8F0D",85:"#CAFF58",86:"#83F62C",87:"#00FF00",88:"#21F906",89:"#C2FFEF",90:"#5AFFFC",91:"#C4FFFE",92:"#BAFEFD",93:"#C0D5FE",94:"#FCB2FD",95:"#FC5DFD",96:"#FC7E09",97:"#D8E014",98:"#B6FF29",99:"#E6DB0F",100:"#C9A00E",101:"#1CC998",102:"#4CFFD1",103:"#ABACBE",104:"#A4BCFD",105:"#FCE6BB",106:"#E20011",107:"#FDB699",108:"#F28E75",109:"#F8E376",110:"#D1F380",111:"#C9FF50",112:"#94919D",113:"#E7FAD9",114:"#BAFFF2",115:"#efefFf",116:"#EFFFEF",117:"#C3E1F2",118:"#F2F2F2",119:"#FEFEFF",120:"#E7000C",121:"#BD0610",122:"#00ff00",123:"#1DC60D",124:"#FEFF33",125:"#A79E0C",126:"#F8A80E",127:"#D8680C"},f=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleClick=function(){a.props.onClick(a.props.row,a.props.col)},a.handleKeyDown=function(e){a.props.onKeyDown(e,a.props.row,a.props.col)},a.buttonRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"focus",value:function(){this.buttonRef&&this.buttonRef.current&&this.buttonRef.current.focus()}},{key:"render",value:function(){var e=0===this.props.value?"cell empty":"cell",t=null===this.props.value||void 0===this.props.value||0===this.props.value?"":this.props.value.toString();return r.a.createElement("button",{className:e,ref:this.buttonRef,onClick:this.handleClick,onKeyDown:this.handleKeyDown,style:{backgroundColor:p[this.props.value]}},t)}}]),n}(r.a.Component);f.defaultProps={row:0,col:0,onClick:function(){},onKeyDown:function(){}};var m=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).offset=8*a.props.row,a}return Object(l.a)(n,[{key:"renderSquares",value:function(){for(var e=[],t=0;t<this.props.numCells;t++)e.push(this.renderSquare(t));return e}},{key:"renderSquare",value:function(e){return r.a.createElement(f,{ref:this.props.cellRefs&&this.props.cellRefs[e],value:this.props.cells&&this.props.cells[e],onKeyDown:this.props.onKeyDown,onClick:this.props.onClick,key:"cell-"+(this.offset+e),col:e,row:this.props.row})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},this.renderSquares())}}]),n}(r.a.Component);m.defaultProps={row:0,numCells:8,cells:[],cellRefs:[],onKeyDown:function(){},onClick:function(){}};var h=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],g=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).rebuildRefs=function(){a.cellRefs=Array(a.props.numRows);for(var e=0;e<a.props.numRows;e++){a.cellRefs[e]=Array(a.props.numCells);for(var t=0;t<a.props.numRows;t++)a.cellRefs[e][t]=r.a.createRef()}},a.handleKeyDown=function(e,t,n){if(-1!==h.indexOf(e.key)){"ArrowDown"===e.key?t=(t+1)%a.props.numRows:"ArrowUp"===e.key?t=(t+(a.props.numRows-1))%a.props.numRows:"ArrowLeft"===e.key?n=(n+(a.props.numRows-1))%a.props.numCells:"ArrowRight"===e.key&&(n=(n+1)%a.props.numCells);var r=a.cellRefs[t][n];r.current&&r.current.focus()}},a.rebuildRefs(),a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.numRows===e.numRows&&this.props.numCells===e.numCells||this.rebuildRefs()}},{key:"renderRows",value:function(){for(var e=[],t=0;t<this.props.numRows;t++)e.push(r.a.createElement(m,{cellRefs:this.cellRefs[t],numCells:this.props.numCells,cells:this.props.grid&&this.props.grid[t],onKeyDown:this.handleKeyDown,onClick:this.props.onClick,key:"row-"+t,row:t}));return e}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderRows())}}]),n}(r.a.Component);g.defaultProps={numRows:8,numCells:8,onClick:function(){}};var v=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("option",{value:this.props.value},this.props.label)}}]),n}(r.a.Component),F=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){for(var t={},n=0;n<e.currentTarget.options.length;n++){var r=e.currentTarget.options[n];r.selected&&(t[r.value]=!0)}var i=Object.keys(t);a.setState({selectedValues:i}),a.props.stateChangeCallbacks&&a.props.stateChangeCallbacks.forEach((function(e){e(i)}))},a.state={selectedValues:e.selectedValues||[]},a}return Object(l.a)(n,[{key:"render",value:function(){for(var e=[],t=Object.keys(this.props.options),n=0;n<t.length;n++){var a=t[n],i=this.props.options[a],s=void 0!==i.label&&i.label.length>0?i.label:i.value;e.push(r.a.createElement(v,{value:i.value,key:"option-"+a,label:s}))}return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.title),r.a.createElement("select",{multiple:!0,onChange:this.handleChange,defaultValue:this.props.defaultValue},e))}}]),n}(r.a.Component);F.defaultProps={title:"",options:{}};var y={midi:{}};y.midi.read=function(e){var t,n=e[0],a=15&n;switch(n>>4){case 8:t=y.midi.read.noteOff;break;case 9:t=e[2]>0?y.midi.read.noteOn:y.midi.read.noteOff;break;case 10:t=y.midi.read.polyAftertouch;break;case 11:t=y.midi.read.controlChange;break;case 12:t=y.midi.read.programChange;break;case 13:t=y.midi.read.channelAftertouch;break;case 14:t=y.midi.read.pitchbend;break;case 15:t=y.midi.read.system;break;default:return y.fail("Received an unrecognized MIDI message: "+JSON.stringify(e))}return t(a,e)},y.midi.read.note=function(e,t,n){return{type:e,channel:t,note:n[1],velocity:n[2]}},y.midi.read.noteOn=function(e,t){return y.midi.read.note("noteOn",e,t)},y.midi.read.noteOff=function(e,t){return y.midi.read.note("noteOff",e,t)},y.midi.read.polyAftertouch=function(e,t){return{type:"aftertouch",channel:e,note:t[1],pressure:t[2]}},y.midi.read.controlChange=function(e,t){return{type:"control",channel:e,number:t[1],value:t[2]}},y.midi.read.programChange=function(e,t){return{type:"program",channel:e,program:t[1]}},y.midi.read.channelAftertouch=function(e,t){return{type:"aftertouch",channel:e,pressure:t[1]}},y.midi.read.twoByteValue=function(e){return e[2]<<7|e[1]},y.midi.read.pitchbend=function(e,t){return{type:"pitchbend",channel:e,value:y.midi.read.twoByteValue(t)}},y.midi.read.system=function(e,t){if(1===e)return y.midi.messageFailure("quarter frame MTC");var n;switch(e){case 0:n=y.midi.read.sysex;break;case 2:n=y.midi.read.songPointer;break;case 3:n=y.midi.read.songSelect;break;case 6:n=y.midi.read.tuneRequest;break;case 8:n=y.midi.read.clock;break;case 10:n=y.midi.read.start;break;case 11:n=y.midi.read.continue;break;case 12:n=y.midi.read.stop;break;case 14:n=y.midi.read.activeSense;break;case 15:n=y.midi.read.reset;break;default:return y.fail("Received an unrecognized MIDI system message: "+JSON.stringify(t))}return n(t)},y.midi.messageFailure=function(e){y.fail("Flocking does not currently support MIDI "+e+" messages.")},y.midi.read.sysex=function(e){var t=240===e[0]?1:0,n=e.length-(247===e[e.length-1]?1:0);return{type:"sysex",data:e instanceof Uint8Array?e.subarray(t,n):e.slice(t,n)}},y.midi.read.valueMessage=function(e,t){return{type:e,value:t}},y.midi.read.songPointer=function(e){var t=y.midi.read.twoByteValue(e);return y.midi.read.valueMessage("songPointer",t)},y.midi.read.songSelect=function(e){return y.midi.read.valueMessage("songSelect",e[1])},y.midi.read.tuneRequest=function(){return{type:"tuneRequest"}},y.midi.systemRealtimeMessages=["tuneRequest","clock","start","continue","stop","activeSense","reset"],y.midi.createSystemRealtimeMessageReaders=function(e){e.forEach((function(e){y.midi.read[e]=function(){return{type:e}}}))},y.midi.createSystemRealtimeMessageReaders(y.midi.systemRealtimeMessages),y.midi.write=function(e){if("sysex"===e.type)return y.midi.write.sysex(e);switch(e.type){case"noteOn":return y.midi.write.note(9,e);case"noteOff":return y.midi.write.note(8,e);case"aftertouch":return y.midi.write.aftertouch(e);case"control":return y.midi.write.controlChange(e);case"program":return y.midi.write.programChange(e);case"pitchbend":return y.midi.write.largeValueMessage(14,e.channel,e);case"songPointer":return y.midi.write.largeValueMessage(15,2,e);case"songSelect":return y.midi.write.largeValueMessage(15,3,e);case"tuneRequest":return y.midi.write.singleByteMessage(15,6);case"clock":return y.midi.write.singleByteMessage(15,8);case"start":return y.midi.write.singleByteMessage(15,10);case"continue":return y.midi.write.singleByteMessage(15,11);case"stop":return y.midi.write.singleByteMessage(15,12);case"activeSense":return y.midi.write.singleByteMessage(15,14);case"reset":return y.midi.write.singleByteMessage(15,15);default:y.fail("Cannot write an unrecognized MIDI message of type '"+e.type+"'.")}},y.midi.write.note=function(e,t){return y.midi.write.threeByteMessage(e,t.channel,t.note,t.velocity)},y.midi.write.controlChange=function(e){return y.midi.write.threeByteMessage(11,e.channel,e.number,e.value)},y.midi.write.programChange=function(e){return y.midi.write.twoByteMessage(12,e.channel,e.program)},y.midi.write.aftertouch=function(e){return e.note?y.midi.write.note(10,e):y.midi.write.twoByteMessage(13,e.channel,e.pressure)},y.midi.write.singleByteMessage=function(e,t){var n=new Uint8Array(1);return n[0]=y.midi.write.statusByte(e,t),n},y.midi.write.twoByteMessage=function(e,t,n){var a=new Uint8Array(2);return a[0]=y.midi.write.statusByte(e,t),a[1]=n,a},y.midi.write.threeByteMessage=function(e,t,n,a){var r=new Uint8Array(3);return r[0]=y.midi.write.statusByte(e,t),r[1]=n,r[2]=a,r},y.midi.write.largeValueMessage=function(e,t,n){var a=new Uint8Array(3);return a[0]=y.midi.write.statusByte(e,t),y.midi.write.twoByteValue(n.value,a,1),a},y.midi.write.statusByte=function(e,t){return(e<<4)+t},y.midi.write.twoByteValue=function(e,t,n){t[n=n||0]=127&e,t[n+1]=e>>7&127},y.midi.write.sysex=function(e){240!==e.data[0]&&247!==e.data[e.data.length-1]||y.fail("Sysex payloads should not include framing bytes.");var t=e.data,n=t.length,a=new Uint8Array(n+2);return a[0]=240,a[n+1]=247,a.set(t,1),a},y.fail=function(e){throw new Error(e)};var C=y,w={copy:function(e){return JSON.parse(JSON.stringify(e))}},E=w,b=n(13),D=n(9),k=n(11),B=n(10),O=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;(Object(o.a)(this,n),(a=t.call(this,e)).updateSelectedInputs=function(e){a.setState({selectedInputs:e})},a.updateSelectedOutputs=function(e){a.setState({selectedOutputs:e}),a.outputChangeListeners.forEach((function(e){e()}))},a.handleStateChange=function(e){var t=e.port,n="input"===t.type?"inputDefs":"outputDefs",r=E.copy(a.state[n]);"connected"===t.state?r[t.id]={label:t.name,value:t.id}:delete r[t.id];var i={};i[n]=r,a.setState(i)},a.sendMidiMessage=function(e,t,n){var r=Object.keys(a.state.outputDefs),i=C.midi.write(e),s=!0===n;r.forEach((function(e){if(-1!==a.state.selectedOutputs.indexOf(e)){var n=!0;if(t){var r=a.state.outputDefs[e],u=(void 0!==r.label&&r.label.length>0?r.label:r.value).match(t);(!u&&!s||s&&u)&&(n=!1)}if(n)a.outputPorts[e].send(i)}}))},a.inputListeners=e.inputListeners||[a.sendMidiMessage],a.outputChangeListeners=e.outputChangeListeners||[],e.outputAccumulator&&e.outputAccumulator(a.sendMidiMessage),a.outputPorts={},a.state={inputDefs:{},selectedInputs:[],outputDefs:{},selectedOutputs:[]},navigator&&navigator.requestMIDIAccess)&&navigator.requestMIDIAccess({sysex:!0,software:!0}).then((function(e){for(var t=e.inputs.values(),n={},r=function(e){n[e.value.id]={label:e.value.name,value:e.value.id},e.value.onmidimessage=function(t){e.value&&a.handleMidiInput(e.value.id,t)}},i=t.next();i&&!i.done;i=t.next())r(i);a.setState({inputDefs:n});for(var s={},u=e.outputs.values(),o=u.next();o&&!o.done;o=u.next())s[o.value.id]={label:o.value.name,value:o.value.id},a.outputPorts[o.value.id]=o.value;a.setState({outputDefs:s}),e.onstatechange=a.handleStateChange}));return a}return Object(l.a)(n,[{key:"handleMidiInput",value:function(e,t){var n=this.state.inputDefs[e],a=-1!==this.state.selectedInputs.indexOf(e);if(n&&a&&this.inputListeners.length){var r=C.midi.read(t.data);this.inputListeners.forEach((function(e){e(r)}))}}},{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{fluid:!0},r.a.createElement(B.a,{className:"mt-3"},r.a.createElement(D.a,null,r.a.createElement(b.a,{block:!0,className:this.state.show?"d-none":null,variant:"secondary",onClick:function(){return e.setState({show:!0})}},"Show MIDI Options"),r.a.createElement(b.a,{block:!0,className:this.state.show?null:"d-none",variant:"secondary",onClick:function(){return e.setState({show:!1})}},"Hide MIDI Options"))),r.a.createElement(B.a,{className:"mt-4"},r.a.createElement(k.a,{className:this.state.show?null:"d-none"},r.a.createElement(B.a,null,r.a.createElement(D.a,{xl:"12",lg:"12",md:"6",sm:"6",xs:"12"},r.a.createElement(F,{title:"Inputs",options:this.state.inputDefs,selectedValues:this.state.selectedInputs,stateChangeCallbacks:[this.updateSelectedInputs]})),r.a.createElement(D.a,{xl:"12",lg:"12",md:"6",sm:"6",xs:"12"},r.a.createElement(F,{title:"Outputs",options:this.state.outputDefs,selectedValues:this.state.selectedOutputs,stateChangeCallbacks:[this.updateSelectedOutputs]}))))))}}]),n}(r.a.Component);O.defaultProps={numRows:8,numCells:8,inputListeners:[]};var A=n(17),R=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).updateLaunchpad=function(){if(a.outputCallbacks&&a.outputCallbacks.length){for(var e=[],t=0;t<a.state.grid.length;t++)for(var n=a.state.grid[t],r=0;r<n.length;r++){var i={type:"noteOn",channel:0,velocity:a.state.grid[t][r],note:10*(8-t)+r+1};e.push(i)}for(var s=0;s<a.outputCallbacks.length;s++)for(var u=a.outputCallbacks[s],o=0;o<e.length;o++){u(e[o],/Launchpad/)}}},a.updateOtherDevices=function(e){if(a.outputCallbacks&&a.outputCallbacks.length){for(var t=[],n=0;n<a.state.grid.length;n++)for(var r=a.state.grid[n],i=0;i<r.length;i++)e.grid[n][i]!==r[i]&&t.push({row:n,col:i,value:r[i]});for(var s=0===t[0].value,u=500/(t.length-1),o=.8*u,l=0;l<t.length;l++){var c=s?t[t.length-1-l]:t[l];0!==c.value&&function(){for(var e=30+8*(8-c.row)+c.col,t={type:"noteOn",channel:0,velocity:64,note:e},n={type:"noteOff",channel:0,velocity:0,note:e},r=l*u,i=r+o,s=function(e){var s=a.outputCallbacks[e];setTimeout((function(){s(t,/Launchpad/,!0)}),r),setTimeout((function(){s(n,/Launchpad/,!0)}),i)},d=0;d<a.outputCallbacks.length;d++)s(d)}()}}},a.registerOutput=function(e){a.outputCallbacks.push(e)},a.handleMidiInput=function(e){if("noteOn"===e.type){var t=e.note||0,n=t%10-1,r=8-Math.floor(t/10);a.pushFromSquare(r,n)}},a.handleClick=function(e,t){a.pushFromSquare(e,t)},a.outputCallbacks=[],a.state={grid:[[70,71,72,73,74,75,76,77],[60,61,62,63,64,65,66,67],[50,51,52,53,54,55,56,57],[40,41,42,43,44,45,46,47],[30,31,32,33,34,35,36,37],[20,21,22,23,24,25,26,27],[10,11,12,13,14,15,16,17],[0,1,2,3,4,5,6,7]]},a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.updateLaunchpad(),this.updateOtherDevices(t)}},{key:"pushFromSquare",value:function(e,t){var n=this;this.setState((function(a,r){if(0===a.grid[e][t]);else{var i=a.grid[e],s=i.indexOf(0);if(-1!==s){var u=a.grid.slice(),o=n.shiftArray(i,s,t);return u[e]=o,{grid:u}}var l=n.extractCol(a,t),c=l.indexOf(0);if(-1!==c){for(var d=JSON.parse(JSON.stringify(a.grid)),p=n.shiftArray(l,c,e),f=0;f<a.grid.length;f++)d[f][t]=p[f];return{grid:d}}}return null}))}},{key:"shiftArray",value:function(e,t,n){var a=e.slice();return a.splice(t,1),a.splice(n,0,0),a}},{key:"extractCol",value:function(e,t){for(var n=[],a=0;a<e.grid.length;a++)n.push(e.grid[a][t]);return n}},{key:"render",value:function(){return r.a.createElement(k.a,{fluid:!0},r.a.createElement(B.a,null,r.a.createElement(D.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},r.a.createElement(M,null)),r.a.createElement(D.a,{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"},r.a.createElement(k.a,{fluid:!0},r.a.createElement(B.a,{className:"mt-3"},r.a.createElement(D.a,null,r.a.createElement("div",{className:"grid"},r.a.createElement(g,{grid:this.state.grid,onClick:this.handleClick})))))),r.a.createElement(D.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},r.a.createElement(O,{outputAccumulator:this.registerOutput,inputListeners:[this.handleMidiInput],outputChangeListeners:[this.updateLaunchpad]}))))}}]),n}(r.a.Component);function M(){var e=Object(a.useState)(!0),t=Object(u.a)(e,2),n=t[0],i=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{fluid:!0},r.a.createElement(B.a,{className:"mt-3"},r.a.createElement(D.a,null,r.a.createElement(b.a,{block:!0,className:n?"d-none":null,variant:"secondary",onClick:function(){return i(!0)}},"Show Instructions"),r.a.createElement(b.a,{block:!0,className:n?null:"d-none",variant:"secondary",onClick:function(){return i(!1)}},"Hide Instructions"))),r.a.createElement(B.a,{className:"mt-4"},r.a.createElement(D.a,null,r.a.createElement(A.a,{show:n,variant:"secondary"},r.a.createElement(A.a.Heading,null,"Instructions"),r.a.createElement("p",null,'This is a simple sliding puzzle.  You can slide one or more squares into the "empty" square (black).'),r.a.createElement("p",null,"You can use a mouse or keyboard to operate the puzzle.  Use tabs or arrow keys to navigate, hit enter on any square that shares a row with the empty square."),r.a.createElement("p",null,'You can connect to MIDI devices using the "Show MIDI options" button to the right of the screen.'))))))}n(28);s.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.8c31415c.chunk.js.map